// Copyright (c) Meta Platforms, Inc. and affiliates.
//
// This source code is licensed under the MIT license found in the
// LICENSE file in the root directory of this source tree

use lazy_static::lazy_static;
use phf::phf_map;
use regex::Regex;

lazy_static! {
    // Match f-strings, i.e. strings starting with one of f/rf/fr
    pub static ref RE_FSTRING: Regex = Regex::new("^[^\"']*f[^\"']*(?:\"|').*").unwrap();
}

lazy_static! {
    // Match multiline interpolations containing parentheses, e.g. {\na\n}
    pub static ref RE_MULTILINE_F_PARENTHESES: Regex = Regex::new("\\{.*\\(.*\\\\n.*").unwrap();
}

pub static SPECIAL_CHARS: [char; 13] = [
    'a', 'b', 'f', 'n', 'r', 't', 'u', 'v', 'x', 'N', 'U', '\'', '\"',
];
pub static HEXA_CONVERSION: phf::Map<char, &'static str> = phf_map! {
    'a' => "x07",
    'b' => "x08",
    'f' => "x0c",
    'v' => "x0b"
};

// String representation of an octal number as int => Target character or hexa representation
// The key 1 corresponds to the octal string "1", "01" and "001"
pub static OCTAL_MAP: phf::Map<u16, &'static str> = phf_map! {
    0_u16 => "\\x00",
    1_u16 => "\\x01",
    2_u16 => "\\x02",
    3_u16 => "\\x03",
    4_u16 => "\\x04",
    5_u16 => "\\x05",
    6_u16 => "\\x06",
    7_u16 => "\\x07",
    10_u16 => "\\x08",
    11_u16 => "\\t",
    12_u16 => "\\n",
    13_u16 => "\\x0b",
    14_u16 => "\\x0c",
    15_u16 => "\\r",
    16_u16 => "\\x0e",
    17_u16 => "\\x0f",
    20_u16 => "\\x10",
    21_u16 => "\\x11",
    22_u16 => "\\x12",
    23_u16 => "\\x13",
    24_u16 => "\\x14",
    25_u16 => "\\x15",
    26_u16 => "\\x16",
    27_u16 => "\\x17",
    30_u16 => "\\x18",
    31_u16 => "\\x19",
    32_u16 => "\\x1a",
    33_u16 => "\\x1b",
    34_u16 => "\\x1c",
    35_u16 => "\\x1d",
    36_u16 => "\\x1e",
    37_u16 => "\\x1f",
    40_u16 => " ",
    41_u16 => "!",
    42_u16 => "\"",
    43_u16 => "#",
    44_u16 => "$",
    45_u16 => "%",
    46_u16 => "&",
    47_u16 => "'",
    50_u16 => "(",
    51_u16 => ")",
    52_u16 => "*",
    53_u16 => "+",
    54_u16 => ",",
    55_u16 => "-",
    56_u16 => ".",
    57_u16 => "/",
    60_u16 => "0",
    61_u16 => "1",
    62_u16 => "2",
    63_u16 => "3",
    64_u16 => "4",
    65_u16 => "5",
    66_u16 => "6",
    67_u16 => "7",
    70_u16 => "8",
    71_u16 => "9",
    72_u16 => ":",
    73_u16 => ";",
    74_u16 => "<",
    75_u16 => "=",
    76_u16 => ">",
    77_u16 => "?",
    100_u16 => "@",
    101_u16 => "A",
    102_u16 => "B",
    103_u16 => "C",
    104_u16 => "D",
    105_u16 => "E",
    106_u16 => "F",
    107_u16 => "G",
    110_u16 => "H",
    111_u16 => "I",
    112_u16 => "J",
    113_u16 => "K",
    114_u16 => "L",
    115_u16 => "M",
    116_u16 => "N",
    117_u16 => "O",
    120_u16 => "P",
    121_u16 => "Q",
    122_u16 => "R",
    123_u16 => "S",
    124_u16 => "T",
    125_u16 => "U",
    126_u16 => "V",
    127_u16 => "W",
    130_u16 => "X",
    131_u16 => "Y",
    132_u16 => "Z",
    133_u16 => "[",
    134_u16 => "\\\\",
    135_u16 => "]",
    136_u16 => "^",
    137_u16 => "_",
    140_u16 => "`",
    141_u16 => "a",
    142_u16 => "b",
    143_u16 => "c",
    144_u16 => "d",
    145_u16 => "e",
    146_u16 => "f",
    147_u16 => "g",
    150_u16 => "h",
    151_u16 => "i",
    152_u16 => "j",
    153_u16 => "k",
    154_u16 => "l",
    155_u16 => "m",
    156_u16 => "n",
    157_u16 => "o",
    160_u16 => "p",
    161_u16 => "q",
    162_u16 => "r",
    163_u16 => "s",
    164_u16 => "t",
    165_u16 => "u",
    166_u16 => "v",
    167_u16 => "w",
    170_u16 => "x",
    171_u16 => "y",
    172_u16 => "z",
    173_u16 => "{",
    174_u16 => "|",
    175_u16 => "}",
    176_u16 => "~",
    177_u16 => "\\x7f",
    200_u16 => "\\x80",
    201_u16 => "\\x81",
    202_u16 => "\\x82",
    203_u16 => "\\x83",
    204_u16 => "\\x84",
    205_u16 => "\\x85",
    206_u16 => "\\x86",
    207_u16 => "\\x87",
    210_u16 => "\\x88",
    211_u16 => "\\x89",
    212_u16 => "\\x8a",
    213_u16 => "\\x8b",
    214_u16 => "\\x8c",
    215_u16 => "\\x8d",
    216_u16 => "\\x8e",
    217_u16 => "\\x8f",
    220_u16 => "\\x90",
    221_u16 => "\\x91",
    222_u16 => "\\x92",
    223_u16 => "\\x93",
    224_u16 => "\\x94",
    225_u16 => "\\x95",
    226_u16 => "\\x96",
    227_u16 => "\\x97",
    230_u16 => "\\x98",
    231_u16 => "\\x99",
    232_u16 => "\\x9a",
    233_u16 => "\\x9b",
    234_u16 => "\\x9c",
    235_u16 => "\\x9d",
    236_u16 => "\\x9e",
    237_u16 => "\\x9f",
    240_u16 => "\\xa0",
    241_u16 => "¡",
    242_u16 => "¢",
    243_u16 => "£",
    244_u16 => "¤",
    245_u16 => "¥",
    246_u16 => "¦",
    247_u16 => "§",
    250_u16 => "¨",
    251_u16 => "©",
    252_u16 => "ª",
    253_u16 => "«",
    254_u16 => "¬",
    255_u16 => "\\xad",
    256_u16 => "®",
    257_u16 => "¯",
    260_u16 => "°",
    261_u16 => "±",
    262_u16 => "²",
    263_u16 => "³",
    264_u16 => "´",
    265_u16 => "µ",
    266_u16 => "¶",
    267_u16 => "·",
    270_u16 => "¸",
    271_u16 => "¹",
    272_u16 => "º",
    273_u16 => "»",
    274_u16 => "¼",
    275_u16 => "½",
    276_u16 => "¾",
    277_u16 => "¿",
    300_u16 => "À",
    301_u16 => "Á",
    302_u16 => "Â",
    303_u16 => "Ã",
    304_u16 => "Ä",
    305_u16 => "Å",
    306_u16 => "Æ",
    307_u16 => "Ç",
    310_u16 => "È",
    311_u16 => "É",
    312_u16 => "Ê",
    313_u16 => "Ë",
    314_u16 => "Ì",
    315_u16 => "Í",
    316_u16 => "Î",
    317_u16 => "Ï",
    320_u16 => "Ð",
    321_u16 => "Ñ",
    322_u16 => "Ò",
    323_u16 => "Ó",
    324_u16 => "Ô",
    325_u16 => "Õ",
    326_u16 => "Ö",
    327_u16 => "×",
    330_u16 => "Ø",
    331_u16 => "Ù",
    332_u16 => "Ú",
    333_u16 => "Û",
    334_u16 => "Ü",
    335_u16 => "Ý",
    336_u16 => "Þ",
    337_u16 => "ß",
    340_u16 => "à",
    341_u16 => "á",
    342_u16 => "â",
    343_u16 => "ã",
    344_u16 => "ä",
    345_u16 => "å",
    346_u16 => "æ",
    347_u16 => "ç",
    350_u16 => "è",
    351_u16 => "é",
    352_u16 => "ê",
    353_u16 => "ë",
    354_u16 => "ì",
    355_u16 => "í",
    356_u16 => "î",
    357_u16 => "ï",
    360_u16 => "ð",
    361_u16 => "ñ",
    362_u16 => "ò",
    363_u16 => "ó",
    364_u16 => "ô",
    365_u16 => "õ",
    366_u16 => "ö",
    367_u16 => "÷",
    370_u16 => "ø",
    371_u16 => "ù",
    372_u16 => "ú",
    373_u16 => "û",
    374_u16 => "ü",
    375_u16 => "ý",
    376_u16 => "þ",
    377_u16 => "ÿ",
    400_u16 => "Ā",
    401_u16 => "ā",
    402_u16 => "Ă",
    403_u16 => "ă",
    404_u16 => "Ą",
    405_u16 => "ą",
    406_u16 => "Ć",
    407_u16 => "ć",
    410_u16 => "Ĉ",
    411_u16 => "ĉ",
    412_u16 => "Ċ",
    413_u16 => "ċ",
    414_u16 => "Č",
    415_u16 => "č",
    416_u16 => "Ď",
    417_u16 => "ď",
    420_u16 => "Đ",
    421_u16 => "đ",
    422_u16 => "Ē",
    423_u16 => "ē",
    424_u16 => "Ĕ",
    425_u16 => "ĕ",
    426_u16 => "Ė",
    427_u16 => "ė",
    430_u16 => "Ę",
    431_u16 => "ę",
    432_u16 => "Ě",
    433_u16 => "ě",
    434_u16 => "Ĝ",
    435_u16 => "ĝ",
    436_u16 => "Ğ",
    437_u16 => "ğ",
    440_u16 => "Ġ",
    441_u16 => "ġ",
    442_u16 => "Ģ",
    443_u16 => "ģ",
    444_u16 => "Ĥ",
    445_u16 => "ĥ",
    446_u16 => "Ħ",
    447_u16 => "ħ",
    450_u16 => "Ĩ",
    451_u16 => "ĩ",
    452_u16 => "Ī",
    453_u16 => "ī",
    454_u16 => "Ĭ",
    455_u16 => "ĭ",
    456_u16 => "Į",
    457_u16 => "į",
    460_u16 => "İ",
    461_u16 => "ı",
    462_u16 => "Ĳ",
    463_u16 => "ĳ",
    464_u16 => "Ĵ",
    465_u16 => "ĵ",
    466_u16 => "Ķ",
    467_u16 => "ķ",
    470_u16 => "ĸ",
    471_u16 => "Ĺ",
    472_u16 => "ĺ",
    473_u16 => "Ļ",
    474_u16 => "ļ",
    475_u16 => "Ľ",
    476_u16 => "ľ",
    477_u16 => "Ŀ",
    500_u16 => "ŀ",
    501_u16 => "Ł",
    502_u16 => "ł",
    503_u16 => "Ń",
    504_u16 => "ń",
    505_u16 => "Ņ",
    506_u16 => "ņ",
    507_u16 => "Ň",
    510_u16 => "ň",
    511_u16 => "ŉ",
    512_u16 => "Ŋ",
    513_u16 => "ŋ",
    514_u16 => "Ō",
    515_u16 => "ō",
    516_u16 => "Ŏ",
    517_u16 => "ŏ",
    520_u16 => "Ő",
    521_u16 => "ő",
    522_u16 => "Œ",
    523_u16 => "œ",
    524_u16 => "Ŕ",
    525_u16 => "ŕ",
    526_u16 => "Ŗ",
    527_u16 => "ŗ",
    530_u16 => "Ř",
    531_u16 => "ř",
    532_u16 => "Ś",
    533_u16 => "ś",
    534_u16 => "Ŝ",
    535_u16 => "ŝ",
    536_u16 => "Ş",
    537_u16 => "ş",
    540_u16 => "Š",
    541_u16 => "š",
    542_u16 => "Ţ",
    543_u16 => "ţ",
    544_u16 => "Ť",
    545_u16 => "ť",
    546_u16 => "Ŧ",
    547_u16 => "ŧ",
    550_u16 => "Ũ",
    551_u16 => "ũ",
    552_u16 => "Ū",
    553_u16 => "ū",
    554_u16 => "Ŭ",
    555_u16 => "ŭ",
    556_u16 => "Ů",
    557_u16 => "ů",
    560_u16 => "Ű",
    561_u16 => "ű",
    562_u16 => "Ų",
    563_u16 => "ų",
    564_u16 => "Ŵ",
    565_u16 => "ŵ",
    566_u16 => "Ŷ",
    567_u16 => "ŷ",
    570_u16 => "Ÿ",
    571_u16 => "Ź",
    572_u16 => "ź",
    573_u16 => "Ż",
    574_u16 => "ż",
    575_u16 => "Ž",
    576_u16 => "ž",
    577_u16 => "ſ",
    600_u16 => "ƀ",
    601_u16 => "Ɓ",
    602_u16 => "Ƃ",
    603_u16 => "ƃ",
    604_u16 => "Ƅ",
    605_u16 => "ƅ",
    606_u16 => "Ɔ",
    607_u16 => "Ƈ",
    610_u16 => "ƈ",
    611_u16 => "Ɖ",
    612_u16 => "Ɗ",
    613_u16 => "Ƌ",
    614_u16 => "ƌ",
    615_u16 => "ƍ",
    616_u16 => "Ǝ",
    617_u16 => "Ə",
    620_u16 => "Ɛ",
    621_u16 => "Ƒ",
    622_u16 => "ƒ",
    623_u16 => "Ɠ",
    624_u16 => "Ɣ",
    625_u16 => "ƕ",
    626_u16 => "Ɩ",
    627_u16 => "Ɨ",
    630_u16 => "Ƙ",
    631_u16 => "ƙ",
    632_u16 => "ƚ",
    633_u16 => "ƛ",
    634_u16 => "Ɯ",
    635_u16 => "Ɲ",
    636_u16 => "ƞ",
    637_u16 => "Ɵ",
    640_u16 => "Ơ",
    641_u16 => "ơ",
    642_u16 => "Ƣ",
    643_u16 => "ƣ",
    644_u16 => "Ƥ",
    645_u16 => "ƥ",
    646_u16 => "Ʀ",
    647_u16 => "Ƨ",
    650_u16 => "ƨ",
    651_u16 => "Ʃ",
    652_u16 => "ƪ",
    653_u16 => "ƫ",
    654_u16 => "Ƭ",
    655_u16 => "ƭ",
    656_u16 => "Ʈ",
    657_u16 => "Ư",
    660_u16 => "ư",
    661_u16 => "Ʊ",
    662_u16 => "Ʋ",
    663_u16 => "Ƴ",
    664_u16 => "ƴ",
    665_u16 => "Ƶ",
    666_u16 => "ƶ",
    667_u16 => "Ʒ",
    670_u16 => "Ƹ",
    671_u16 => "ƹ",
    672_u16 => "ƺ",
    673_u16 => "ƻ",
    674_u16 => "Ƽ",
    675_u16 => "ƽ",
    676_u16 => "ƾ",
    677_u16 => "ƿ",
    700_u16 => "ǀ",
    701_u16 => "ǁ",
    702_u16 => "ǂ",
    703_u16 => "ǃ",
    704_u16 => "Ǆ",
    705_u16 => "ǅ",
    706_u16 => "ǆ",
    707_u16 => "Ǉ",
    710_u16 => "ǈ",
    711_u16 => "ǉ",
    712_u16 => "Ǌ",
    713_u16 => "ǋ",
    714_u16 => "ǌ",
    715_u16 => "Ǎ",
    716_u16 => "ǎ",
    717_u16 => "Ǐ",
    720_u16 => "ǐ",
    721_u16 => "Ǒ",
    722_u16 => "ǒ",
    723_u16 => "Ǔ",
    724_u16 => "ǔ",
    725_u16 => "Ǖ",
    726_u16 => "ǖ",
    727_u16 => "Ǘ",
    730_u16 => "ǘ",
    731_u16 => "Ǚ",
    732_u16 => "ǚ",
    733_u16 => "Ǜ",
    734_u16 => "ǜ",
    735_u16 => "ǝ",
    736_u16 => "Ǟ",
    737_u16 => "ǟ",
    740_u16 => "Ǡ",
    741_u16 => "ǡ",
    742_u16 => "Ǣ",
    743_u16 => "ǣ",
    744_u16 => "Ǥ",
    745_u16 => "ǥ",
    746_u16 => "Ǧ",
    747_u16 => "ǧ",
    750_u16 => "Ǩ",
    751_u16 => "ǩ",
    752_u16 => "Ǫ",
    753_u16 => "ǫ",
    754_u16 => "Ǭ",
    755_u16 => "ǭ",
    756_u16 => "Ǯ",
    757_u16 => "ǯ",
    760_u16 => "ǰ",
    761_u16 => "Ǳ",
    762_u16 => "ǲ",
    763_u16 => "ǳ",
    764_u16 => "Ǵ",
    765_u16 => "ǵ",
    766_u16 => "Ƕ",
    767_u16 => "Ƿ",
    770_u16 => "Ǹ",
    771_u16 => "ǹ",
    772_u16 => "Ǻ",
    773_u16 => "ǻ",
    774_u16 => "Ǽ",
    775_u16 => "ǽ",
    776_u16 => "Ǿ",
    777_u16 => "ǿ"
};
